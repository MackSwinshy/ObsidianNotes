
- 11:18 
	#编程 #python 
	# Python 函数详析
	
	1. 函数的生命周期
		1. 定义函数：当解释器遇到 `def` 语句时，CPython将会编译函数体，创建一个函数对象 `object function` ，函数对象的内置属性 `__code__` 、 `__globals__` 等储存了代码相关的信息
		2. 调用函数：当函数被调用时，解释器会创建一个新的栈帧 stack frame 用于执行函数的字节码
		3. `return` 返回值：当解释器执行到 `return` 语句对应的字节码指令（ `RETURN_VALUE` ）时，会将 `return` 后面的表达式值计算出来并压入栈顶，终止当前栈帧的执行并销毁，将返回值压入调用者的栈顶，恢复调用者执行
		4. 销毁函数
	2. 函数的储存机制
		1. **函数对象**在**堆区**储存不变的元信息（静态），生命周期是函数的定义到销毁；这些内置属性在函数定义时确定，并且在整个函数生命周期中保持不变（除非显式修改）
			- `__code__` 编译后的字节码，以及一些静态信息（如变量名、常量等）
			- `__globals__` 函数定义时所在的全局命名空间
			- `__closure__` 闭包信息
		2. 函数**被调用**时会在**栈区**创建**栈帧**，储存了函数的**动态执行状态**，生命周期是函数执行期间
			- `f_code` 是指针，指向 `__code__`
			- `f_globals` 是指针，指向 `__globals__`
			- `f_locals` 是指针，指向储存了当前的局部变量值的字典
			- `f_back` 是指针，指向调用者的栈帧
			- `f_lasti` `int` 类型，最后/上一条执行的指令在字节码中的下标（程序计数器）
	 